<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="pt-br" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Monitoramento do Servidor</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <link rel="stylesheet" th:href="@{/home/css/styles.css}">
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark navbar-blur mb-5 fixed-top">
    <div class="container">
        <a class="navbar-brand d-flex align-items-center" href="/">
            <i class="bi bi-terminal-fill me-2 text-success"></i>
            <span class="fw-bold">Server Monitor</span>
        </a>

        <div class="navbar-nav ms-auto d-flex flex-row gap-3">
            <a class="nav-link active fw-bold text-white" href="/">Dashboard</a>
            <a class="nav-link" href="/charts">Gráficos</a>
        </div>
    </div>
</nav>

<div style="height: 80px;"></div>

<div class="container">

    <div class="row mb-4">
        <div class="col-12">
            <div class="card card-metric shadow-sm">
                <div class="card-body d-flex align-items-center justify-content-between p-4">
                    <div>
                        <div class="card-title-label mb-1">Sistema Operacional</div>
                        <h3 class="m-0 text-white">
                            <i class="bi bi-ubuntu me-2 text-warning"></i>
                            <span th:text="${osName}">Linux</span>
                        </h3>
                        <div class="mt-3 d-flex align-items-center text-secondary">
                            <i class="bi bi-clock-history me-2 text-info"></i>
                            <span class="small text-uppercase me-2 fw-bold" style="letter-spacing: 0.5px;">Tempo de Atividade:</span>
                            <span id="uptimeText" class="text-white font-monospace" th:text="${uptime}">--</span>
                        </div>
                    </div>
                    <i class="bi bi-motherboard fs-1 text-secondary opacity-25 d-none d-md-block"></i>
                </div>
            </div>
        </div>
    </div>

    <div class="row g-4">

        <div class="col-12 col-sm-6 col-xl-3">
            <div class="card card-metric h-100">
                <div class="card-body p-4">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <span class="card-title-label"><i class="bi bi-cpu me-2"></i>CPU</span>
                        <span class="badge rounded-pill text-bg-success bg-opacity-25 text-success">
                            <i class="bi bi-activity"></i> Ativo
                        </span>
                    </div>
                    <div class="d-flex align-items-baseline mb-3">
                        <span id="cpuPercentText" class="display-5 metric-value" th:text="${cpuPercent} + '%'">0%</span>
                        <span class="ms-2 text-secondary small">uso</span>
                    </div>
                    <div class="progress mb-2">
                        <div id="cpuBar" class="progress-bar bg-primary" role="progressbar" th:style="'width: ' + ${cpuInt} + '%'"></div>
                    </div>
                    <small class="text-secondary">Em tempo real</small>
                </div>
            </div>
        </div>

        <div class="col-12 col-sm-6 col-xl-3">
            <div class="card card-metric h-100">
                <div class="card-body p-4">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <span class="card-title-label"><i class="bi bi-memory me-2"></i>RAM</span>
                    </div>
                    <div class="d-flex align-items-baseline mb-3">
                        <span id="ramPercentText" class="display-5 metric-value" th:text="${ramPercent} + '%'">0%</span>
                        <span class="ms-2 text-secondary small">uso</span>
                    </div>
                    <div class="progress mb-3">
                        <div id="ramBar" class="progress-bar bg-info" role="progressbar" th:style="'width: ' + ${ramInt} + '%'"></div>
                    </div>
                    <div class="d-flex justify-content-between text-secondary small">
                        <span>Livre: <span id="ramFreeText" class="text-white" th:text="${ramLivre}">--</span></span>
                        <span>Total: <span class="text-white" th:text="${ramTotal}">--</span></span>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12 col-sm-6 col-xl-3">
            <div class="card card-metric h-100">
                <div class="card-body p-4">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <span class="card-title-label"><i class="bi bi-device-hdd me-2"></i>Disco</span>
                    </div>
                    <div class="d-flex align-items-baseline mb-3">
                        <span id="diskPercentText" class="display-5 metric-value" th:text="${diskPercent} + '%'">0%</span>
                        <span class="ms-2 text-secondary small">uso</span>
                    </div>
                    <div class="progress mb-3">
                        <div id="diskBar" class="progress-bar" role="progressbar"
                             style="background-color: #9b59b6;"
                             th:style="'width: ' + ${diskInt} + '%; background-color: #9b59b6;'">
                        </div>
                    </div>
                    <div class="d-flex justify-content-between text-secondary small">
                        <span>Livre: <span id="diskFreeText" class="text-white" th:text="${diskFree}">--</span></span>
                        <span>Total: <span class="text-white" th:text="${diskTotal}">--</span></span>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12 col-sm-6 col-xl-3">
            <div class="card card-metric h-100">
                <div class="card-body p-4">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <span class="card-title-label"><i class="bi bi-thermometer-half me-2"></i>Temp</span>
                        <div>
                            <span id="tempStatus" class="me-2 small fw-bold text-white">Estável</span>
                            <span id="tempBadge" class="badge rounded-pill text-bg-primary bg-opacity-25 text-primary">Core</span>
                        </div>
                    </div>
                    <div class="d-flex align-items-baseline mb-3">
                        <span id="tempText" class="display-5 metric-value" th:text="${cpuTemp} + '°C'">0.0°C</span>
                        <span class="ms-2 text-secondary small">Celsius</span>
                    </div>
                    <div class="progress mb-3">
                        <div id="tempBar" class="progress-bar bg-warning" role="progressbar" th:style="'width: ' + ${cpuTempInt} + '%'"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-12 col-sm-6 col-xl-3"> <div class="card card-metric h-100">
            <div class="card-body p-4">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <span class="card-title-label"><i class="bi bi-hdd-network me-2"></i>Rede</span>
                    <span class="badge rounded-pill text-bg-info bg-opacity-25 text-info">
                            <i class="bi bi-arrow-down-up"></i> I/O
                        </span>
                </div>

                <div class="d-flex align-items-center mb-3">
                    <i class="bi bi-download text-success me-3 fs-4"></i>
                    <div>
                        <span id="netDownText" class="metric-value fs-4">0 KB/s</span>
                        <div class="small text-secondary">Download</div>
                    </div>
                </div>

                <div class="d-flex align-items-center">
                    <i class="bi bi-upload text-primary me-3 fs-4"></i>
                    <div>
                        <span id="netUpText" class="metric-value fs-4">0 KB/s</span>
                        <div class="small text-secondary">Upload</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

<footer class="mt-5 text-center opacity-50 small pb-4">
    <p>&copy; 2026 Ubuntu Dashboard Monitor, teste pipeline 2</p>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.5.1/sockjs.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>

<script th:src="@{/home/js/dashboard.js}"></script>

</body>
</html>